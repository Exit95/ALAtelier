---
import { Image } from 'astro:assets';
import Button from './ui/Button.astro';

interface Props {
  title: string;
  subtitle?: string;
  backgroundImage?: ImageMetadata | string;
  primaryCTA?: {
    label: string;
    href: string;
  };
  secondaryCTA?: {
    label: string;
    href: string;
  };
  align?: 'left' | 'center' | 'right';
  overlay?: boolean;
  class?: string;
}

const {
  title,
  subtitle,
  backgroundImage,
  primaryCTA,
  secondaryCTA,
  align = 'center',
  overlay = true,
  class: className = ''
} = Astro.props;

const alignClasses = {
  left: 'hero-align-left',
  center: 'hero-align-center',
  right: 'hero-align-right'
};
---

<section class:list={['hero', alignClasses[align], { 'hero-with-image': backgroundImage }, className]}>
  {backgroundImage && (
    <div class="hero-background">
      {typeof backgroundImage === 'string' ? (
        <img src={backgroundImage} alt="" class="hero-bg-image" loading="eager" />
      ) : (
        <Image src={backgroundImage} alt="" class="hero-bg-image" loading="eager" />
      )}
      {overlay && <div class="hero-overlay"></div>}
    </div>
  )}
  
  <div class="container hero-content">
    <h1 class="hero-title">{title}</h1>
    {subtitle && <p class="hero-subtitle">{subtitle}</p>}
    
    {(primaryCTA || secondaryCTA) && (
      <div class="hero-actions">
        {primaryCTA && (
          <Button href={primaryCTA.href} variant="primary" size="lg">
            {primaryCTA.label}
          </Button>
        )}
        {secondaryCTA && (
          <Button href={secondaryCTA.href} variant="outline" size="lg">
            {secondaryCTA.label}
          </Button>
        )}
      </div>
    )}
    
    <slot />
  </div>
</section>

<style>
  .hero {
    position: relative;
    padding: clamp(3rem, 8vw, 6rem) 0;
    min-height: clamp(400px, 60vh, 600px);
    display: flex;
    align-items: center;
  }

  .hero-with-image {
    min-height: clamp(500px, 80vh, 800px);
    color: var(--color-white);
  }

  .hero-background {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .hero-bg-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.3),
      rgba(0, 0, 0, 0.5)
    );
  }

  .hero-content {
    position: relative;
    z-index: 1;
  }

  .hero-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: var(--space-3);
  }

  .hero-subtitle {
    font-size: clamp(1.125rem, 2vw, 1.5rem);
    line-height: var(--line-height-relaxed);
    margin-bottom: var(--space-6);
    max-width: 60ch;
  }

  .hero-actions {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  .hero-align-left .hero-content {
    text-align: left;
  }

  .hero-align-left .hero-subtitle {
    margin-left: 0;
  }

  .hero-align-center .hero-content {
    text-align: center;
  }

  .hero-align-center .hero-subtitle,
  .hero-align-center .hero-actions {
    margin-left: auto;
    margin-right: auto;
  }

  .hero-align-center .hero-actions {
    justify-content: center;
  }

  .hero-align-right .hero-content {
    text-align: right;
  }

  .hero-align-right .hero-subtitle {
    margin-left: auto;
  }

  .hero-align-right .hero-actions {
    justify-content: flex-end;
  }

  /* Tablet */
  @media (max-width: 959px) {
    .hero-title {
      font-size: clamp(2rem, 6vw, 3rem);
    }

    .hero-subtitle {
      font-size: clamp(1rem, 3vw, 1.25rem);
    }
  }

  /* Mobile */
  @media (max-width: 639px) {
    .hero {
      padding: clamp(2rem, 6vw, 4rem) 0;
      min-height: 400px;
    }

    .hero-with-image {
      min-height: 500px;
    }

    .hero-title {
      font-size: clamp(1.75rem, 8vw, 2.5rem);
      margin-bottom: var(--space-2);
    }

    .hero-subtitle {
      font-size: 1rem;
      margin-bottom: var(--space-4);
    }

    .hero-actions {
      flex-direction: column;
      width: 100%;
      gap: var(--space-2);
    }

    .hero-actions :global(.btn) {
      width: 100%;
      justify-content: center;
    }

    /* Center align on mobile for better readability */
    .hero-align-left .hero-content,
    .hero-align-right .hero-content {
      text-align: center;
    }

    .hero-align-left .hero-subtitle,
    .hero-align-right .hero-subtitle {
      margin-left: auto;
      margin-right: auto;
    }

    .hero-align-left .hero-actions,
    .hero-align-right .hero-actions {
      justify-content: center;
    }
  }
</style>

